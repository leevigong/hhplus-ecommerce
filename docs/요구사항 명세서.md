# 🛒 e-커머스 서비스 요구사항 분석

## 서비스 개요
이 서비스는 사용자가 상품을 주문하고 미리 충전한 잔액을 통해 결제하는 e-커머스 서비스입니다. 주요 기능은 잔액 관리, 상품 조회, 주문 및 결제 처리, 쿠폰 발급 및 적용, 인기 상품 추천입니다.

---

## 📌 기능 요구사항

### 1. 잔액 충전 / 조회
- 사용자 식별자를 통한 잔액 충전
- 사용자 식별자를 통한 잔액 조회

### 2. 상품 조회
- 상품 ID, 이름, 가격, 카테고리, 잔여수량 등 상품 정보 조회

### 3. 선착순 쿠폰
- 선착순 쿠폰 발급
- 사용자별 보유 쿠폰 목록 조회
- 쿠폰 사용 시 할인 적용

### 4. 주문 / 결제
- 사용자 식별자, 주문 상품 목록 입력받아 결제 진행
- 결제 성공 시 잔액 차감
- 상품 재고 감소
- 결제 성공 후 데이터 플랫폼에 주문 정보 전송

### 5. 인기 판매 상품 조회
- 최근 3일간 판매량 기준 상위 5개 상품 조회

---

## ⚙️ 비기능 요구사항

### 성능 및 안정성
- 동시성 처리를 통해 재고 및 잔액 정확성 유지
- 상품 및 잔액 조회 시점에 데이터 정확성 보장

### 신뢰성
- 결제 및 쿠폰 적용 시 정확한 처리 보장
- 데이터 손실 방지 및 무결성 보장

### 확장성 및 유지보수성
- 분산 환경에서도 안정적으로 동작하는 구조
- 향후 기능 추가 및 변경에 용이한 구조 설계

---

## 🛠️ 기술적 고려사항

### 재고 관리
- 비관적 락(pessimistic lock) 또는 낙관적 락(optimistic lock) 적용
- Atomic한 DB 연산을 통해 재고 일관성 유지

### 잔액 관리
- 트랜잭션을 활용하여 정확한 차감 처리
- 동시 접근에 의한 Race Condition 방지

### 쿠폰 관리
- 선착순 특성으로 인해 Redis 등 인메모리 DB 사용 고려

